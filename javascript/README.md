## rest2mobile SDK for JavaScript

This SDK leverages code generated by the Magnet rest2mobile tool for:

*   Connecting to the server
*   Marshalling and un-marshalling JSON data
*   Building the REST URL and HTTP headers
*   Converting JSON data to the correct data types

More information is available at [http://developer.magnet.com](http://developer.magnet.com).

The SDK is licensed under the terms of the [Magnet Software License Agreement](http://www.magnet.com/resources/tos.html).  Please see [LICENSE](https://github.com/magnetsystems/magnet-sdk-javascript/blob/master/LICENSE) file for full details.

### Import the SDK into your own PhoneGap or Web app

Download and place magnet-sdk.js into a directory within your project. In your HTML file, add a script tag reference to the file.

```html
<!DOCTYPE html>
<html>
<head>
<title>My PhoneGap App</title>
<script type="text/JavaScript" src="js/magnet-sdk.js"></script>
</head>
<body>
</body>
</html>
```

### Import the SDK into your Node.js app

From command line, navigate to the root directory of a node.js project. Place the magnet-sdk.js into a directory with your project. You will need to reference the SDK within your application logic as shown below.

```
var MagnetJS = require('./lib/magnet-sdk');
```

## Samples

Samples for making calls using the generated r2m API libraries are available in the "samples" folder.

nodejs sample (requires [node.js](http://nodejs.org))

```
cd nodejs
node app.js
```

PhoneGap sample (requires [Cordova CLI](http://phonegap.com/install/))

```
cd phonegap
cordova platform add ios
cordova run ios
```

web application sample (requires [node.js](http://nodejs.org))

```
cd web/cors-proxy
node app.js web
// open web browser and navigate to http://localhost:3010
```

## Grunt Commands

After installation of [grunt](http://gruntjs.com), the following commands can be used to build API documentation and run the jasmine-node unit tests.

```
grunt docs
```

```
grunt nodetests
```

## Notes / Caveats

#### Self-Signed Certificates Over SSL On Android

Current versions of the Cordova framework on Android clients cannot execute AJAX requests to an SSL-enabled server which uses a self-signed certificate. There are two workarounds:

* Use a valid SSL certificate while developing your app.
* Disable SSL while developing your app, then switch to a valid SSL certificate in production.


#### Self-Signed Certificates Over SSL On iOS

Current versions of the Cordova framework on iOS clients cannot execute AJAX requests to an SSL-enabled server which uses a self-signed certificate. To circumvent this issue during development, following the steps listed below.

1. Open AppDelegate.m in a text editor.

```
ios/<project name>/Classes/AppDelegate.m
```

2. Append the following Objective-C code into the bottom of the file.

```
@implementation NSURLRequest(DataController)
+ (BOOL)allowsAnyHTTPSCertificateForHost:(NSString *)host
{
    return YES;
}
@end
```

3. Rebuild the iOS app from Xcode.

4. Make sure to remove this code in production to avoid security issues.

### Web

#### Lack Of Support For Cross-Domain AJAX Requests

Browser-based web applications suffer from the "same-origin policy", a security concept which prevents AJAX requests across domain boundaries. As a result, the web application must reside on the same host and port as the target server in order to make requests. A workaround is to use CORS (Cross Origin Resource Sharing), a client and server implementation which circumvents this limitation through the use of HTTP headers and a pre-flight request.

More information about CORS is available from this external link:
[Enable CORS](http://enable-cors.org/)

PhoneGap apps can be configured to make cross-domain AJAX requests from the config.xml file. More information can be found in the [Whitelist Guide](http://docs.phonegap.com/en/3.5.0/guide_appdev_whitelist_index.md.html#Whitelist%20Guide).

